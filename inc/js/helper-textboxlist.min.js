var initTextboxLists = {}

function initTextboxList_Post( non_js_id, input_id, ajax_url, hint_message, no_results_message, post_id ) {
	// Add JS field and remove the NO JS input
	jQuery("#"+non_js_id).after('<p><input type="text" name="textboxlist-tags" value="" id="textboxlist-tags" /></p>');
	jQuery("#"+non_js_id).remove();
	
	// Register textbox list
	initTextboxLists[post_id] = new TextboxList( input_id, {
		url: ajax_url+'?action=simpletags&st_action=collection_textboxlist',
		hintMessage: hint_message,
		opacity: 1,
		noResultsMessage: no_results_message
	});
	
	// Load current tags, if a post
	jQuery.getJSON( ajax_url+'?action=simpletags&st_action=collection_textboxlist_post&post_id='+post_id, function(data) {
		jQuery.each(data, function(key, val) {
			initTextboxLists[post_id].addItem(val);
		});
	});
}

function initTextboxList_AutoList( non_js_id, input_id, ajax_url, hint_message, no_results_message ) {
	// Get current values... no ID here...
	var current_tags = jQuery( "#"+non_js_id ).children().first().val();

	// Add JS field and remove the NO JS input
	jQuery("#"+non_js_id).after('<p><input type="text" name="textboxlist-tags" value="" id="textboxlist-tags" /></p>');
	jQuery("#"+non_js_id).remove();
	
	// Register textbox list
	var initTextboxLists_Auto = new TextboxList( input_id, {
		url: ajax_url+'?action=simpletags&st_action=collection_textboxlist',
		hintMessage: hint_message,
		opacity: 1,
		noResultsMessage: no_results_message
	});

	// Current values
	jQuery.getJSON( ajax_url+'?action=simpletags&st_action=collection_textboxlist_auto&current_tags='+current_tags, function(data) {
		jQuery.each(data, function(key, val) {
			initTextboxLists_Auto.addItem(val);
		});
	});
}